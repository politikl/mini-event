<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Public Trees - Deco my Tree</title>
    <link rel="stylesheet" href="decomytree.css">
    <link rel="stylesheet" href="decomytree_picker.css">
</head>
<body>
    <div class="background-trees"></div>
    <div class="celestial-body sun"></div>
    
    <!-- Menu Background Selector -->
    <div id="menu-bg-container" class="menu-bg-container">
        <label for="menu-bg-select" style="color:rgba(245,240,232,0.7);font-size:0.85em;margin-right:8px;display:flex;align-items:center;height:32px">Background:</label>
        <select id="menu-bg-select" style="padding:6px;border-radius:4px;border:1px solid rgba(212,175,55,0.3);background:rgba(51,51,51,0.8);color:var(--cream);cursor:pointer;font-size:0.85em;height:32px">
            <option value="scene-default">Classic</option>
            <option value="scene-colorful">Colorful</option>
            <option value="scene-snowy">Snowy</option>
            <option value="scene-aurora">Aurora</option>
            <option value="scene-sunset">Sunset</option>
            <option value="scene-midnight">Midnight</option>
            <option value="scene-forest">Forest</option>
            <option value="scene-cosmic">Cosmic</option>
        </select>
    </div>
    
    <div id="auth-container">
        <div id="user-info" class="hidden">
            <span id="username-display"></span>
            <button id="sign-out-btn">Sign Out</button>
        </div>
    </div>

    <main class="container">
        <div class="picker-header">
            <h1>Find a Tree</h1>
            <div class="search-box">
                <input type="search" id="search-input" placeholder="Search trees...">
            </div>
            <button id="back-btn" class="back-btn">‚Üê Back</button>
            <p style="font-size:0.85em;color:rgba(245,240,232,0.6);margin-top:8px">(Your own tree is hidden)</p>
        </div>

        <div id="trees-grid" class="trees-grid">
            <!-- Public trees listed here -->
        </div>
    </main>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-analytics.js";
        import { 
            getAuth, 
            GoogleAuthProvider, 
            signInWithPopup, 
            signOut, 
            onAuthStateChanged 
        } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-auth.js";
        import { 
            getFirestore, 
            collection, 
            getDocs, 
            query, 
            where, 
            orderBy
        } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyARY96nrH2Aio8rOiLkewSXtTS40TZLrAw",
            authDomain: "nerd-mini-events.firebaseapp.com",
            projectId: "nerd-mini-events",
            storageBucket: "nerd-mini-events.firebasestorage.app",
            messagingSenderId: "974357416633",
            appId: "1:974357416633:web:e190de60553d03e968",
            measurementId: "G-V9NGCSEY8J"
        };

        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const auth = getAuth(app);
        const db = getFirestore(app);

        window.firebaseAuth = auth;
        window.firebaseDb = db;
        window.firebaseSignOut = signOut;
        window.firebaseOnAuthStateChanged = onAuthStateChanged;
        window.firebaseCollection = collection;
        window.firebaseGetDocs = getDocs;
        window.firebaseQuery = query;
        window.firebaseWhere = where;
        window.firebaseOrderBy = orderBy;

        window.firebaseReady = true;
        if (window.initTreePicker) window.initTreePicker();
    </script>

    <script src="decomytree_picker.js"></script>
</body>
</html>
